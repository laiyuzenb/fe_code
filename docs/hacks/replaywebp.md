---
nav:
  title: 特殊场景问题解决方案
  order: 3
---

# 如何重新播放webp动画

在react中使用state控制webp图片的生成和卸载，webp动画不会重新播放，而是继续播放。

1. 可以使用ref控制img标签的src属性 重新赋值  
   但上面的方法仅限于在你的环境内你可以控制img标签的ref时使用  
   假设你要在上级组件中控制子组件的webp图片的重新播放逻辑 且 webp图片播放后需要卸载，那么就不适用了。
2. 对src属性进行随机字符串拼接，这样每次都会重新加载图片（清空浏览器的图片动画播放缓存）
   所以此时不建议使用图片链接作为src属性，而是使用base64，这样可以节约流量，且不会影响图片的加载速度。

<code src='./demos/webp/index.jsx'></code>
